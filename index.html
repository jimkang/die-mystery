<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>TITLE (Taper #6)</title>

<!-- “TITLE” Copyright (C) 2021 AUTHOR

Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright
notice and this notice are preserved. This file is offered as-is,
without any warranty.

This is from Taper #6: A Throw of the Dice, Spring 2021:

https://taper.badquart.to/6/title_of_your_work.html

... [Place your creative statement here] ...

-->

	<style>
	body { margin:0 ; overflow:hidden }
	a { color:#eee ; text-decoration:none }
	header { margin:0 ; padding:0 ; background-color:#444 ; color:#bbb ;
		position:relative ; z-index:1000 }
	header > h1 { margin:0 ; font-size:12px ; font-family:sans-serif ;
		border-bottom:1px #999 solid ; padding:5px 10px ; line-height:17px }
</style>
</head>
<body>
<header id=nav>
	<h1>
		<a href="index.html">Taper #6 :
		A Throw of the Dice</a> : Spring 2021 <br>
		<a href="template.html">“TITLE”</a> by
		<a href="about.html#AUTHOR">AUTHOR</a> :
		<a href="prev.html">&lt;&lt;</a> &mdash;
		<a href="next.html">&gt;&gt;</a>
	</h1>
</header> <!-- The poem that follows, up to </body>, is at most 2kb -->

<style>
circle{fill:#aaa}
#b *{fill:none;stroke:#bbb}
#e *{stroke:hsla(0,0%,0%,0.1)}
#ta{color:red}
#tb{color:blue}
</style>
<svg width="60vmin" height="60vmin" viewBox="0 0 100 100">
  <g id="a"/>
  <g id="b"/>
  <g id="c"/>
  <g id="d"/>
  <g id="e"/>
  <g id="f"/>
</svg>
<div id="ta"></div>
<div id="tb"></div>
<script>
const bR=39+r(10);
var ctr=[50,50];
const pi=Math.PI;
const tp=2*pi;
var ias=[
  -tp/32+r(100)/100*tp/16,
  .3*tp+r(100)/100*tp/16,
  .64*tp+r(100)/100*tp/16
];
var as=[ias[0],ias[2]+pi,ias[1],ias[0]+pi,ias[2],ias[1]+pi]
var cps=as.map(a => cPt(ctr, bR, a));
var ta=s('#ta');
var tb=s('#tb');
function r(m){return ~~(Math.random() * m);}
function s(sel){return document.querySelector(sel);}
function t(e, s){e.textContent=s;}
function add(e, h){e.innerHTML=e.innerHTML+h;}
function cPt(c, r, a){return [c[0]+r*Math.cos(a), c[1]+r*Math.sin(a)];}
function cSVG(r, c, fill='#444', stroke='none'){
   return `<circle r="${r}" cx="${c[0]}" cy="${c[1]}" fill="${fill}" stroke="${stroke}"/>`;
}
function lSVG(s, e, stroke='#444'){
  return `<line x1="${s[0]}" y1="${s[1]}" x2="${e[0]}" y2="${e[1]}" stroke="${stroke}"/>`;
}
function pSVG(ps, stroke='#222'){
  return `<polygon points="${ps.map(p=>p.join(',')).join(' ')}" stroke="${stroke}" fill="none"/>`;
}

var steps=[
 {l:2,a:"What's going on?"},
 {l:2,b:"I'm going to make a die."},
 {l: 0, f: (d) =>{add(s('#a'), cSVG(1, ctr));}},
 {l: 0, f: (d) =>{add(s('#b'), cSVG(bR, ctr));}},
 {l: 0.3, f(){add(s('#c'), cSVG(1, cps[0]));}},
 {l: 0.3, f(){add(s('#c'), cSVG(1, cps[2]));}},
 {l: 0.3, f(){add(s('#c'), cSVG(1, cps[4]));}},
 {l: 2, f(){add(s('#d'), lSVG(ctr, cps[0]));}},
 {l: 0.3, f(){add(s('#d'), lSVG(ctr, cps[2])+lSVG(ctr, cps[4]));}},
 {l: 0.3, f(){add(s('#e'), lSVG(ctr, cps[1])+lSVG(ctr, cps[3])+lSVG(ctr, cps[5]));}},
 {l: 0.3, f(){add(s('#f'), pSVG(cps));}},
];

function run(step, i){
  if (step.f) step.f();
  if (step.a) t(ta,step.a);
  if (step.b) t(tb,step.b);

  var next=steps[i + 1];
  if(next){
    setTimeout(()=>run(next,i+1),step.l*1000);
  }
}

run(steps[0], 0);
</script>
</body>
</html>
